<!DOCTYPE html>
<html>
<head>
	<title>测试</title>
</head>
<body>
<form id="upload-form" enctype="multipart/form-data">
	<input type="file" accept="image/*" capture="camera" id="photo-input">
	<button type="submit">上传照片</button>
</form>

<div id="preview-container"></div>

<script>
	const form = document.getElementById('upload-form');
	const photoInput = document.getElementById('photo-input');
	const previewContainer = document.getElementById('preview-container');

	form.addEventListener('submit', (e) => {
		e.preventDefault();

		const file = photoInput.files[0];
		if (file) {
			const formData = new FormData();
			formData.append('photo', file);

			// 替换为实际的上传地址
			const uploadUrl = '../upload';

			// 将照片数据以multipart/form-data的形式打包，然后通过POST请求发送到服务器上的上传地址
			fetch(uploadUrl, {
				method: 'POST',
				body: formData
			})
				.then(response => response.json())
				.then(result => {
					// 处理上传成功后的操作
					console.log('上传成功:', result);

					// 显示上传的照片
					const imageURL = result.imageUrl;
					const imageElement = document.createElement('img');
					imageElement.src = imageURL;
					previewContainer.appendChild(imageElement);
				})
				.catch(error => {
					// 处理上传失败后的操作
					console.error('上传失败:', error);
				});
		}
	});
</script>

</body>
</html>
